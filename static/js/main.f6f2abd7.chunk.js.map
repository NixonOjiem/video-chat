{"version":3,"sources":["icons/hangup.svg","icons/more-vertical.svg","icons/copy.svg","components/Header.js","App.js","reportWebVitals.js","index.js"],"names":["_line","_line2","_path","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","SvgHangup","_ref","svgRef","title","titleId","props","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","className","ref","id","x1","y1","x2","y2","d","ForwardRef","_circle","_circle2","_circle3","SvgMoreVertical","cx","cy","_rect","SvgCopy","x","y","rx","ry","Header","_jsxs","children","_jsx","href","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","apps","initializeApp","firestore","pc","RTCPeerConnection","iceServers","urls","iceCandidatePoolSize","Menu","joinCode","setJoinCode","setPage","onClick","value","onChange","target","placeholder","Videos","_ref2","mode","callId","webcamActive","setWebcamActive","useState","roomId","setRoomId","localRef","useRef","remoteRef","hangUp","async","close","roomRef","collection","doc","get","then","querySnapshot","forEach","delete","window","location","reload","autoPlay","playsInline","muted","disabled","HangupIcon","tabIndex","role","MoreIcon","navigator","clipboard","writeText","CopyIcon","localStream","mediaDevices","getUserMedia","video","audio","remoteStream","MediaStream","getTracks","track","addTrack","ontrack","event","streams","current","srcObject","callDoc","offerCandidates","answerCandidates","onicecandidate","candidate","add","toJSON","offerDescription","createOffer","setLocalDescription","offer","sdp","type","set","onSnapshot","snapshot","data","currentRemoteDescription","answer","answerDescription","RTCSessionDescription","setRemoteDescription","docChanges","change","RTCIceCandidate","addIceCandidate","createAnswer","update","onconnectionstatechange","connectionState","App","currentPage","setCurrentPage","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f6f2abd7.chunk.js","sourcesContent":["var _line, _line2, _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgHangup(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-phone-missed\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _line || (_line = /*#__PURE__*/React.createElement(\"line\", {\n    x1: 23,\n    y1: 1,\n    x2: 17,\n    y2: 7\n  })), _line2 || (_line2 = /*#__PURE__*/React.createElement(\"line\", {\n    x1: 17,\n    y1: 1,\n    x2: 23,\n    y2: 7\n  })), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgHangup);\nexport default __webpack_public_path__ + \"static/media/hangup.ca680c47.svg\";\nexport { ForwardRef as ReactComponent };","var _circle, _circle2, _circle3;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgMoreVertical(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-more-vertical\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 12,\n    cy: 12,\n    r: 1\n  })), _circle2 || (_circle2 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 12,\n    cy: 5,\n    r: 1\n  })), _circle3 || (_circle3 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 12,\n    cy: 19,\n    r: 1\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgMoreVertical);\nexport default __webpack_public_path__ + \"static/media/more-vertical.4cad7095.svg\";\nexport { ForwardRef as ReactComponent };","var _rect, _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgCopy(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-copy\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 9,\n    y: 9,\n    width: 13,\n    height: 13,\n    rx: 2,\n    ry: 2\n  })), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgCopy);\nexport default __webpack_public_path__ + \"static/media/copy.4c19a6dd.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\r\n\r\nfunction Header() {\r\n  return (\r\n    <div className='Navigation-bar'>\r\n        <h3 className='App-name'>Video chat</h3>\r\n        <ul className='List-items'>\r\n            <li><a href='https://github.com/NixonOjiem/video-chat'>Github</a></li>\r\n            <li><a href='https://myportfolio-cde82.web.app/'>Portfolio</a></li>\r\n        </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header","import { useRef, useState } from \"react\";\r\n\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\n\r\nimport { ReactComponent as HangupIcon } from \"./icons/hangup.svg\";\r\nimport { ReactComponent as MoreIcon } from \"./icons/more-vertical.svg\";\r\nimport { ReactComponent as CopyIcon } from \"./icons/copy.svg\";\r\n\r\nimport \"./App.css\";\r\nimport Header from \"./components/Header\";\r\n\r\n// Initialize Firebase\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyAFwxz_LlUYMA4g3q0ucXBWIv6Hhqr7yXw\",\r\n    authDomain: \"simple-currency-converte-6e98d.firebaseapp.com\",\r\n    projectId: \"simple-currency-converte-6e98d\",\r\n    storageBucket: \"simple-currency-converte-6e98d.appspot.com\",\r\n    messagingSenderId: \"603085476950\",\r\n    appId: \"1:603085476950:web:8b767faf5e24b89a1797f7\",\r\n    measurementId: \"G-VXK02NG2J7\"\r\n  };\r\n\r\nif (!firebase.apps.length) {\r\n    firebase.initializeApp(firebaseConfig);\r\n}\r\n\r\nconst firestore = firebase.firestore();\r\n\r\n// Initialize WebRTC\r\nconst servers = {\r\n    iceServers: [\r\n        {\r\n            urls: [\r\n                \"stun:stun1.l.google.com:19302\",\r\n                \"stun:stun2.l.google.com:19302\",\r\n            ],\r\n        },\r\n    ],\r\n    iceCandidatePoolSize: 10,\r\n};\r\n\r\nconst pc = new RTCPeerConnection(servers);\r\n\r\nfunction App() {\r\n    const [currentPage, setCurrentPage] = useState(\"home\");\r\n    const [joinCode, setJoinCode] = useState(\"\");\r\n\r\n    return (\r\n        <div className=\"app\">\r\n            <Header />\r\n            {currentPage === \"home\" ? (\r\n                <Menu\r\n                    joinCode={joinCode}\r\n                    setJoinCode={setJoinCode}\r\n                    setPage={setCurrentPage}\r\n                />\r\n            ) : (\r\n                <Videos\r\n                    mode={currentPage}\r\n                    callId={joinCode}\r\n                    setPage={setCurrentPage}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction Menu({ joinCode, setJoinCode, setPage }) {\r\n    return (\r\n        <div className=\"home\">\r\n            <div className=\"create box\">\r\n                <button onClick={() => setPage(\"create\")}>Create Call</button>\r\n            </div>\r\n\r\n            <div className=\"answer box\">\r\n                <input\r\n                    value={joinCode}\r\n                    onChange={(e) => setJoinCode(e.target.value)}\r\n                    placeholder=\"Join with code\"\r\n                />\r\n                <button onClick={() => setPage(\"join\")}>Answer</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction Videos({ mode, callId, setPage }) {\r\n    const [webcamActive, setWebcamActive] = useState(false);\r\n    const [roomId, setRoomId] = useState(callId);\r\n\r\n    const localRef = useRef();\r\n    const remoteRef = useRef();\r\n\r\n    const setupSources = async () => {\r\n        const localStream = await navigator.mediaDevices.getUserMedia({\r\n            video: true,\r\n            audio: true,\r\n        });\r\n        const remoteStream = new MediaStream();\r\n\r\n        localStream.getTracks().forEach((track) => {\r\n            pc.addTrack(track, localStream);\r\n        });\r\n\r\n        pc.ontrack = (event) => {\r\n            event.streams[0].getTracks().forEach((track) => {\r\n                remoteStream.addTrack(track);\r\n            });\r\n        };\r\n\r\n        localRef.current.srcObject = localStream;\r\n        remoteRef.current.srcObject = remoteStream;\r\n\r\n        setWebcamActive(true);\r\n\r\n        if (mode === \"create\") {\r\n            const callDoc = firestore.collection(\"calls\").doc();\r\n            const offerCandidates = callDoc.collection(\"offerCandidates\");\r\n            const answerCandidates = callDoc.collection(\"answerCandidates\");\r\n\r\n            setRoomId(callDoc.id);\r\n\r\n            pc.onicecandidate = (event) => {\r\n                event.candidate &&\r\n                    offerCandidates.add(event.candidate.toJSON());\r\n            };\r\n\r\n            const offerDescription = await pc.createOffer();\r\n            await pc.setLocalDescription(offerDescription);\r\n\r\n            const offer = {\r\n                sdp: offerDescription.sdp,\r\n                type: offerDescription.type,\r\n            };\r\n\r\n            await callDoc.set({ offer });\r\n\r\n            callDoc.onSnapshot((snapshot) => {\r\n                const data = snapshot.data();\r\n                if (!pc.currentRemoteDescription && data?.answer) {\r\n                    const answerDescription = new RTCSessionDescription(\r\n                        data.answer\r\n                    );\r\n                    pc.setRemoteDescription(answerDescription);\r\n                }\r\n            });\r\n\r\n            answerCandidates.onSnapshot((snapshot) => {\r\n                snapshot.docChanges().forEach((change) => {\r\n                    if (change.type === \"added\") {\r\n                        const candidate = new RTCIceCandidate(\r\n                            change.doc.data()\r\n                        );\r\n                        pc.addIceCandidate(candidate);\r\n                    }\r\n                });\r\n            });\r\n        } else if (mode === \"join\") {\r\n            const callDoc = firestore.collection(\"calls\").doc(callId);\r\n            const answerCandidates = callDoc.collection(\"answerCandidates\");\r\n            const offerCandidates = callDoc.collection(\"offerCandidates\");\r\n\r\n            pc.onicecandidate = (event) => {\r\n                event.candidate &&\r\n                    answerCandidates.add(event.candidate.toJSON());\r\n            };\r\n\r\n            const callData = (await callDoc.get()).data();\r\n\r\n            const offerDescription = callData.offer;\r\n            await pc.setRemoteDescription(\r\n                new RTCSessionDescription(offerDescription)\r\n            );\r\n\r\n            const answerDescription = await pc.createAnswer();\r\n            await pc.setLocalDescription(answerDescription);\r\n\r\n            const answer = {\r\n                type: answerDescription.type,\r\n                sdp: answerDescription.sdp,\r\n            };\r\n\r\n            await callDoc.update({ answer });\r\n\r\n            offerCandidates.onSnapshot((snapshot) => {\r\n                snapshot.docChanges().forEach((change) => {\r\n                    if (change.type === \"added\") {\r\n                        let data = change.doc.data();\r\n                        pc.addIceCandidate(new RTCIceCandidate(data));\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        pc.onconnectionstatechange = (event) => {\r\n            if (pc.connectionState === \"disconnected\") {\r\n                hangUp();\r\n            }\r\n        };\r\n    };\r\n\r\n    const hangUp = async () => {\r\n        pc.close();\r\n\r\n        if (roomId) {\r\n            let roomRef = firestore.collection(\"calls\").doc(roomId);\r\n            await roomRef\r\n                .collection(\"answerCandidates\")\r\n                .get()\r\n                .then((querySnapshot) => {\r\n                    querySnapshot.forEach((doc) => {\r\n                        doc.ref.delete();\r\n                    });\r\n                });\r\n            await roomRef\r\n                .collection(\"offerCandidates\")\r\n                .get()\r\n                .then((querySnapshot) => {\r\n                    querySnapshot.forEach((doc) => {\r\n                        doc.ref.delete();\r\n                    });\r\n                });\r\n\r\n            await roomRef.delete();\r\n        }\r\n\r\n        window.location.reload();\r\n    };\r\n\r\n    return (\r\n        <div className=\"videos\">\r\n            <video\r\n                ref={localRef}\r\n                autoPlay\r\n                playsInline\r\n                className=\"local\"\r\n                muted\r\n            />\r\n            <video ref={remoteRef} autoPlay playsInline className=\"remote\" />\r\n\r\n            <div className=\"buttonsContainer\">\r\n                <button\r\n                    onClick={hangUp}\r\n                    disabled={!webcamActive}\r\n                    className=\"hangup button\"\r\n                >\r\n                    <HangupIcon />\r\n                </button>\r\n                <div tabIndex={0} role=\"button\" className=\"more button\">\r\n                    <MoreIcon />\r\n                    <div className=\"popover\">\r\n                        <button\r\n                            onClick={() => {\r\n                                navigator.clipboard.writeText(roomId);\r\n                            }}\r\n                        >\r\n                            <CopyIcon /> Copy joining code\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {!webcamActive && (\r\n                <div className=\"modalContainer\">\r\n                    <div className=\"modal\">\r\n                        <h3>\r\n                            Turn on your camera and microphone and start the\r\n                            call\r\n                        </h3>\r\n                        <div className=\"container\">\r\n                            <button\r\n                                onClick={() => setPage(\"home\")}\r\n                                className=\"secondary\"\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button onClick={setupSources}>Start</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}